<%- include("./partials/header") %>

<div class="container mt-2">
  <div class="row d-flex justify-content-center">
    <div class="col-lg-6 col-md-8">
      <div class="mb-4 text-center">
        <% if(!user){ %>
          <a href="/signin" class="btn btn-primary">Sign In</a>
          <a href="/signup" class="btn btn-secondary">Sign Up</a>
        <% } else { %>
          <a href="/logout" class="btn btn-danger">Log Out</a>
        <% } %>
      </div>
      <div class="bg-light px-5 pt-5 pb-3">
        <div class="d-flex justify-content-between align-items-center">
          <input id="title-edit" type="hidden" name="" value="">
          <h2 class="m-0 p-0">My Task List</h2>
        </div>
        <ul class="list-group list-group-flush mt-4">
          <% tasks.forEach(function(task){ %>
            <li class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
              <%= task.content %>
              <form class="" action="/list/<%= user.owns %>/<%= task._id %>/delete?_method=DELETE" method="POST">
                <button class="btn m-0 p-0"><span class="badge badge-danger">X</span></button>
              </form>
            </li>
          <% }); %>
          <form action="/list/<%= user.owns %>/add?_method=PUT" method="POST">
            <li class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
              <input type="text" name="new" class="w-100 form-control border-0" placeholder="Enter new task..">
              <button type="submit" name="button" class="btn"><i class="fas fa-plus"></i></button>
            </li>
          </form>
        </ul>
        <form class="mt-4" action="/list/<%= user.owns %>/?_method=DELETE" method="POST">
          <button type="submit" class="btn btn-danger">Reset List</button>
        </form>
        <strong><p class="mt-4">Users with access:</p></strong>
        <ul class="list-group">
          <% users.forEach(function(access){ %>
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <%= access %>
              <% if(access === user.username){ %>
                <span class="badge"><i class="fas fa-crown"></i></span>
              <% } %>
            </li>
          <% }); %>
          <li class="list-group-item p-0 border-0">
            <div class="input-group p-0">
              <input type="text" class="form-control p-4" placeholder="Friend's username...">
              <button type="submit" name="button" class="btn btn-primary ml-0">Add User</button>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>

<%- include("./partials/footer") %>
